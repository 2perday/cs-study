# 혼공넷
## 1-1 컴퓨터 네트워크를 알아야 하는 이유
- 인터넷 = 여러 네트워크를 연결한 네트워크의 네트워크
- 개발자가 컴퓨터 네트워크를 알아야 하는 이유 = 각종 개발 도구는 네트워크에 대한 배경지식이 있어야만 활용할 수 있는 기능들이 있기 때문임.

## 1-2 네트워크 거시적으로 살펴보기
- 그래프 = 노드들을 연결하는 간선으로 이루어진 자료 구조
- 이 때의 자료 구조 = 정보를 표현하고 다루는 방법을 의미함.
- 모든 네트워크는 노드, 간선, 노드 간 주고받는 메시지로 구성됨.
- 호스트 = 가장자리 노드 = 네트워크를 통해 흐르는 정보를 최초로 rx/tx함.
- 서버 = 어떠한 서비스를 제공하는 호스트.
- 클라이언트 = 서버에게 어떠한 서비스를 욫펑하고 서버의 응답을 제공받는 호스트.
- 여기 책에서는 중간 노드들을 네트워크 장비라 통칭함. 이러한 것들에는 이더넷허브, 스위치, 라우터, 공유기 등이 있음.
- 통신 매체 = 노드를 연결하는 간선, 무선, 유선이냐.
- 메시지 = 통신 매체로 연결된 노드가 주고받는 정보. 메시지는 웹 페이지, 파일, 메일 등 어떠한 것이 될 수 있음.
- 범위에 따른 분류
    - lan = local area network, 가까운 지역 연결 근거리 통신망
    - wan = wide area network, lan들을 연결함.
        - wan은 isp를 통해 구축되고 관리됨.
- can? = campus area network
- man? = metropolitan area network
- 회선 교환 방식 = 메시지 전송로인 회선을 설정하고 이를 통해 메시지를 주고받는 방식 = 두 호스트가 연결
    - 다만 이 방식은 회선의 이용 효율이 낮아질 수 있음.
    - 가능한 모든 회선에 끊임없이 메시지가 흐르고 있어야만 회선의 이용 효율이 높아지기 때문.
- 패킷 교환 방식 = 위의 문제를 해결한 방식으로, 메시지를 패킷 단위로 쪼개 전송함.
    - 이 때 중간 노드인 패킷 스위치는 패킷이 수신지까지 올바르게 도달할 수 있도록 최적의 경로를 설정하거나 송수신지를 식별.
    - 대표적인 패킷 스위치 장비 = 라우터, 스위치
    - 페이로드 = 패킷을 통해 전송하고자 하는 데이터
    - 헤더, 트레일러 = 패킷에 붙는 일종의 부가 정보, 제어 정보.
- 주소
    - 유니캐스트 = 가장 일반적인 형태의 송수신 방식, 하나의 수신지에 메시지를 전송하는 방식.
    - 브로트캐스트 = 자신을 제외한 네트워크상의 모든 호스트에게 전송함.
        - 브로드캐스트가 전송되는 범위 = 브로드캐스트 도메인.

## 1-3 네트워크 미시적으로 살펴보기
- 프로토콜 = 통신 과정에서 정보를 올바르게 주고받기 위해 합의된 규칙이나 방법
- 네트워크 참조 모델 = 통신이 일어나는 구조를 계층화한 것
- 캡슐화(역캡슐화) = 통신 과정에서 이루어지는 것
- 네트워크 참조 모델
    1. 송수신하려는 정보를 유무선 매체를 통해 주고받음
    2. 송신지와 수신지를 결정
    3. 안정적인 송수신을 위해 정보를 더하고 빼는 과정
    4. 응용 프로그램에서 송수신하려는 정보를 전달받는 과정
- 통신 과정을 계층으로 나눈 이유?
    1. 네트워크 구성과 설계가 용이
    2. 네트워크 문제 진단과 해결이 용이
- osi 모델
    - iso 표준 네크워크 참조 모델
    - 통신 단계를 7단계로 나눔 = 최하위부터 물리, 데이터 링크, 네트워크, 전송, 세션, 표현, 응용 계층임.
    1. 물리 계층 = 최하단, 비트 신호를 주고받는 계층
    2. 데이터 링크 계층 = 네트워크 내 주변 장치 간의 정보를 올바르게 주고받기 위한 계증
    3. 네트워크 계층 = 메시지를 다른 네트워크에 속한 수신지까지 전달하는 계층
    4. 전송 계층 = 신뢰성 있고 안정성 잇는 전송을 해야 할 때 필요한 계증
    5. 세션 계층 = 말그대로 세션을 관리하기 위한 계층.
        - 일반적으로 통신을 주고받는 호스트의 응용 프로그램 간 연결 상태를 의미함
    6. 표현 계층 = 사람이 이해할 수 있는 언어인 문자를 컴퓨터가 이해할 수 있는 코드로 변환, 압축, 암호화와 같은 작업이 이루어짐
    7. 응용 계층 = 최상단, 사용자 및 사용자가 이용하는 응용 프로그램과 가장 밀접히 맞닿아 있는 계층
- tcp/ip model...
    - 이론보다는 구현에 중점을 둔 네트워크 참조 모델
    - tcp/ip 4계층, 인터넷 프로토콜 suite, tcp/ip 프로토콜 스택이라고도 불림.
    - ip = 인터넷 프로토콜의 약자였네
    - 왜 네트워크 참조 모델에 이러한 이름이 붙음? =이 두 프로토콜이 오늘날 네트워크 구현의 핵심으로 간주되기 때문.
    1. 네트워크 액세스 계층 = 링크 계층, 또는 네트워크 인터페이스 계층으로 불림.
        - osi 모델 데이터 링크 계층과 유사함.
    2. 인터넷 계층 = osi 네트워크와 유사
    3. 전송 계층 = osi 전송 계층과 유사   
    4. 응용 계층 = osi 세션, 표현, 응용 계층을 합친 것과 유사.
- 캡슐/역캡슐화
    - 송신시 캡슐, 수신 시 역캡슐
- pdu = 각 계층에서 송수신되는 메시지의 단위
- 트래픽 = 네트워크 내의 정보량을 의미
- 처리율 = 단위 시간당 네트워크를 통해 실제로 전송되는 정보량. bps, mbps, gbps단위로 표현.
- 패킷 로스 = 높은 트래픽, 네트워크 장애 시 발생

## 2-1 이더넷
- 이더넷은 현대 랜, 특히 유선랜 환경에서 가장 대중적으로 사용되는 기술. 케이블 필요.
- 이더넷 표준 = IEEE 802.3
- 전송속도 = Mbps = Base-T
- Base = 베이스밴드의 약자, 변조 타입을 의미. 변조타입 = 비트 신호로 변환된 데이터를 통신 매체로 전송하는 방법
- 추가 특성 = 통신 매체의 특성을 명시, 전송 가능한 최대 거리 또는 물리 계층 인코딩, 레인 수
- 통신 매체 종류 = C, T, S, L = 동축 케이블, 트위스티드 페어, 단파장 광섬유, 장파장 광섬유
- 이더넷 프레임 = 상위 계층으로부터 받아들인 정보에 헤더와 트레일러를 추가하는 캡슐화 과정을 통해 만들어짐
    - 수신지 입장에서는 프레임의 헤더와 트레일러를 제거한 뒤 상위 계층으로 올려보내는 역캡슐화 과정을 거침
- 프리앰블 = 이더넷 프레임의 시작을 알리는 8바이트 크기 정보
- MAC Address = 물리적 주소. 데이터 링크 계층의 핵심, 네트워크 인터페이스마다 부여되는 6바이트 길이의 주소
- 타입/길이 = 필드 명시 크기 1500 이하 = 프레임의 크기(길이)를 나타내는 데 사용, 1536 이상은 타입
- 데이터 = 상위 계층으로 tx/rx해야 되는 내용
- FCS = 수신한 이더넷 프레임에 오류가 있는 지 확인하기 위한 필드, 이 필드에는 CRC, 순환 중복 검사라고 불리는 오류 검출용 값이 들어감.
- 토큰 링 = 호스트들이 링(고리) 형태로 연결

## 2-2 NIC와 케이블
- NIC = Network Interface Controller, 호스트와 통신 매체를 연결하고, 맥 주소가 부여되는 네트워크 장비
- 케이블 = 오늘날 유선 네트워크에서 사용하는 대표적인 케이블은 크게 두 종류임.
    1. 트위스티드 페어 케이블
    2. 광섬유 케이블
- 트위스티드 페어 케이블
    - 구리 선으로 전기 신호를 주고받는 통신 매체
    - U, S, F = 실드 없음, 브레이드 실드, 포일 실드
- 광섬유 케이블
    - 광섬유를 통해 광신호를 주고받는 유선 통신 매체
    - 싱글모드, 멀티모드로 나뉨

- 싱글/멀티모드
    1. 코어 지름 = 작음 / 큼
    2. 빛의 이동 경로 = 하나 / 여러 개
    3. 거리 전송 = 장거리 / 근거리
    4. 신호 손실 = 적음 / 많음
    5. 사용하는 빛의 파장 = 장파장 / 단파장
    6. 비용 = 높음 / 낮음

## 2-3 허브
- 허브 = 여러 대의 호스트를 연결할 수 있는 물리 계층의 장비, 전달받은 신호를 다른 모든 포트로 내보내고 반이중 모드로 통신함
- 반이중 모드는 데이터를 한 번에 한 방향으로만 전송할 수 있는 통신 방식, 전이중 모드는 동시에 양방향으로 전송할 수 있는 통신 방식
- 콜리전 도메인 = 충돌 발생 가능성이 있는 영역을 의미.
    - 허브에 연결된 호스트 전체가 콜리전 도메인에 속함.
- CSMA/CD = 반이중 이더넷 네트워크의 충돌 방지 프로토콜
    - 캐리어 감지 = 현재 통신 매체의 사용 가능 여부를 검사
    - MA = 다중 접근
    - CD = 충돌 검출

## 2-4 스위치
- 스위치 = 포트별로 콜리전 도메인을 나누며 전이중 모드 통신을 지원하는 데이터 링크 계층의 장비
    - MAC 주소 테이블로 맥 어드레스를 학습해 원하는 포트로 패킷을 포워딩하고 원치 않은 포트는 필터링할 수 있음
    - L2 스위치라고도 부름
    - MAC 주소 학습
        1. 플러딩
        2. 포워딩, 필터링
        3. 에이징
- VLAN = 스위치로 만들 수 있는 가상의 LAN
    - 포트 기반, MAC기반 VLAN이 있음
    - VLAN 트렁킹 = 두 대 이상의 VLAN 스위치를 효율적으로 연결하여 확장하는 방법

## 3-1 LAN을 넘어서는 네트워크 계층
- 네트워크 계층 = 통신을 빠르게 주고받기 위해 패킷이 이동할 최적의 경로를 결정하는 라우팅이 이루어짐
- IP = 네트워크 계층의 핵심 프로토콜, IP 주소 지정, IP 단편화를 수행
    - 네트워크 계층의 IP주소를 이용해 네트워크상의 호스트를 식별할 수 있음
    - IPv4, IPv6이 있으며 각각 주소의 길이와 헤더의 구성이 다름
    - 식별자 = 패킷에 할당된 번호
    - 플래그 = 총 3개의 비트로 구성
        - 첫 번째 비트는 항상 0으로 예약됨
        - 나머지 두 개의 비트 중 하나는 DF라는 이름이 붙음
    - 단편화 오프셋 = 패킷이 단편화되기 전 패킷의 초기 데이터에서 몇 번째로 떨어진 패킷인지를 나타냄
    - TTL = 패킷의 수명
    - 다음 헤더 = 상위 계층의 프로토콜을 가리키거나 확장 헤더를 가리킴
- ARP = 동일 네트워크 내에 있는 호스트 IP 주소를 통해, MAC 주소를 알아내기 위한 프로토콜
    - 동작 과정 = 요청, 응답, 테이블 갱신

## 3-2 IP 주소
- 하나의 주소는 크게 네트워크, 호스트 주소로 이루어짐
- 클래스풀 주소 체계 = 클래슬을 기반으로 주소를 관리하는 주소 체계
- 클래스리스 = 클래스풀보다 더 유동적이고 정교하게 네트워크를 구획할 수 있음
- 서브넷 마스트 = 주소상에서 네트워크 주소는 1, 호스트는 0으로 표기한 비트열을 의미함
- 공인, 사설 주소가 있음
- NAT = 주소를 변환하는 기술
- 정적, 동적 주소가 있음. 동적 할당에는 일반적으로 DCHP가 이용됨

## 3-3 라우팅
- 라우팅 = 패킷이 이동할 최적의 경로를 설정한 뒤 해당 경로로 패킷을 이동시키는 것
- 라우팅 테이블 = 라우터가 저장하고 관리하는 테이블
    - 포함된 정보
        1. 수신지 IP주소, 서브넷 마스크
        2. 다음 홉
        3. 네트워크 인터페이스
        4. 메트릭
- 디폴트 라우트 = 기본적으로 패킷을 내보낼 경로
- 라우팅 프로토콜
    - IGP = AS 내부
    - EGP = AS 외부
- RIP, OSPF = IGP에서 최적의 경로를 선정하는 과정 중, 거리벡터, 링크 상태가 사용되느냐로 구분

## 4-1 전송 계층 개요: IP의 한계와 포트
- IP는 신뢰할 수 없는 비신뢰성, 비연결형 프로토콜이라는 점임.
- 최선형 전달 = 통신 과정 중 패킷의 데이터가 손상되거나 중복된 패킷이 전송되었더라도 확인하지 않고, 재전송도 안하고, 순서대로 패킷이 도달할 것이라는 보장도 하지 않는다는 의미
- IP의 한계를 보완하는 전송 계층
    1. 전송 계층은 연결형 통신을 가능하게 함.
    2. 전송 계층은 신뢰성 있는 통신을 가능하게 함.
- 포트 = 패킷이 실행 중인 특정 앱까지 전달되려면 패킷에 특정 앱을 식별할 수 있는 정보가 포함되어야 하는 데, 이러한 정보임.
    - 0~1023 = 잘 알려진 포트
    - 1024~49151 = 등록된 포트
    - 49152~65535 = 동적, 사설, 임시 포트
- 포트 기반 NAT
- 포트 포워딩
- ICMP = 패킷의 전송 과정에 대한 피드백 메시지를 얻기 위해 사용하는 프로토콜

## 4-2 TCP와 UDP
- TCP = 신뢰할 수 있는 통신을 위한 연결혈 프로토콜
    - 세그먼트 헤더 구조
        - 송신지 포트, 수신지 포트
        - 순서 번호
        - 확인 응답 번호
        - 제어 비트
        - 윈도우
    - 제어 비트
        - ACK = 세그먼트의 승인을 나타내기 위한 비트
        - SYN = 연결 수립
        - FIN = 연결 종료
    - 3 way handshake
- UDP = 신뢰성은 떨어지지만 비교적 빠른 통신이 가능한 비연결형 프로토콜
    - 데이터그램 = 송신지 포트와 수신지 포트, UDP 길이, 체크섬 필드가 있음.

## 4-3 TCP의 오류-흐름-혼잡 제어
- 오류 제어 = 재전송 기법
- ARQ = 수신 호스트의 답변과 타임아웃 발생을 토대로 문제를 진단, 문제가 생긴 메시지를 재전송함으로써 신뢰성을 확보하는 방식
- Stop and wait ARQ = 메시지를 송신, 확인 응답 수신, 다시 송신, 이에 대한 확인 응답을 받는 것을 반복
- Go back and ARQ = 각 세그먼트에 대한 ACK 세그먼트가 도착하기 전이더라도 여러 세그먼트를 보냄
    - 이렇게 연속해서 메시지를 전달할 수 있는 기술을 파이프라이닝이라고 함
- Selective repeadt ARQ = 선택적으로 재전송하는 방법
- 혼잡 제어
    - 느린 시작 알고리즘
    - 혼잡 회피 알고리즘
    - 빠른 회복 알고리즘
- ECN = 명시적 혼잡 알림

## 5-1 DNS와 자원
- 도메인 네임 = 호스트의 주소와 대응되는 문자열 형태의 호스트 특정 정보
- 네임서버 = 전화번호부처럼 관리하는 서버
- DNS 서버 = 도메인 네임을 관리하는 네임 서버
- 루트 도메인 - 최상위 도메인 - 2단계 도메인 - 전체 주소 도메인 네임
- 계층적 네임 서버
    1. 로컬 네임 서버
    2. 루트 네임 서버
    3. TLD 네임 서버
    4. 책임 네임 서버
- 리졸빙
    - 재귀적 질의
    - 반복적 질의
- DNS 캐시
- 자원을 식별하는 URI = 네트워크 상 자원을 식별할 수 있는 정보
    - 위치 이용 = URL
    - 이름 이용 = URN
- URL
    1. scheme
    2. authority
    3. path
    4. query
    5. fragment
- DNS 레코드 타입

## 5-2 HTTP
- 특성
    1. 요청-응답 기반 프로토콜
    2. 미디어 독립적 프로토콜
    3. stateless 프로토콜
    4. 지속 연결 프토토콜
- 메시지 구조 = 시작 라인, 필드 라인, 메시지 본문
- 메서드
    1. get
    2. head
    3. post
    4. put
    5. patch
    6. delete
- 상태 코드
    - 100번대 = 정보
    - 200번대 = 성공 상태
    - 300번대 = 리다이렉션 상태
    - 400번대 = 클라 에러 상태
    - 500번대 = 서버 에러 상태

## 5-3 HTTP헤더, 기반 기술
- 헤더
    - host
    - user-agent
    - referer
    - auth
- 응답 시
    - server
    - allow
    - retry-after
    - location
    - www-auth
- 둘 다
    - date
    - connection
    - content-len
    - content-type, lang, encoding
- cache = 불필요한 대역폭 낭비와 응답 지연을 방지하기 위해 정보의 사본을 임시로 저장
    - 개인 전용 캐시, 공용 캐시
- 쿠키 = 서버에서 생성되어 클라 측에 저장되는 데이터, 상태를 유지하지 않는 HTTP의 특성을 보완하기 위한 수단